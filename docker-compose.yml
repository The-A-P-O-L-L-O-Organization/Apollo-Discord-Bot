# Docker Compose configuration for John Discord Bot
# This is the recommended way to run the bot in production

services:
  bot:
    # Build the image from the Dockerfile
    build:
      context: .
      dockerfile: Dockerfile
    
    # Container name for easy identification
    container_name: john-discord-bot
    
    # Restart policy - restart container if it crashes or on system reboot
    restart: unless-stopped
    
    # Environment variables
    environment:
      - NODE_ENV=production
      - DISCORD_TOKEN=${DISCORD_TOKEN}
      - CLIENT_ID=${CLIENT_ID}
    
    # Volume mount for environment file
    env_file:
      - .env
    
    # Health check configuration
    healthcheck:
      test: ["CMD", "node", "-e", "process.exit(0)"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    
    # Logging configuration
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    
    # Network configuration (optional - uncomment if needed)
    # networks:
    #   - discord-bot-network

# Optional networks configuration
# networks:
#   discord-bot-network:
#     driver: bridge

# Volume configuration (optional - for persistent data)
# volumes:
#   bot-data:
#     driver: local

